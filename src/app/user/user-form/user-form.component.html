
@if(errorMessage != '')
{
   <div  class="text-danger text-center">
      {{errorMessage}}
   </div>
}
@else
{
   <form (ngSubmit)="onSubmit()" [formGroup]="userForm"  class="formClass">
       <div class="pageTitle" >
          {{pageTitle}}
       </div>
       <div class="buttonBar" style="margin-top:10px">
          @if(formAction == 'detail')
          {
            <button class="btn btn-light headerButton" type="button" (click)="navigateBack()">Go Back</button>
            <button class="btn btn-light headerButton" type="button" >Update</button>
           }
           @else {
             <button class="btn btn-success headerButton" *ngIf="formAction != 'detail'"  [disabled]="userForm.invalid"  type="submit" >Save</button>
             <button class="btn btn-warning"  *ngIf="formAction != 'detail'" type="button"  (click)="navigateBack()">Cancel</button>
            }
       </div>
       <div class="container">
        <div class="row" style="margin-top: 5px;">
            <div class="col-2">
                <label class="form-label" style="float:right">Name *</label>
            </div>
            <div class="col-10">
                <input required  [disabled]=disableControls class="form-control" formControlName="name"   type="text"   [(ngModel)]="user.name" />
                <div *ngIf="hasError('name', 'required')">
                    <p style="color: red">Name is required</p>
                </div>
            </div>   
        </div>
        <div class="row" style="margin-top: 5px;">
            <div class="col-2">
                <label class="form-label" style="float:right">UserName *</label>
            </div>
            <div class="col-10">
                <input required  [disabled]=disableControls class="form-control" formControlName="userName"  type="text"   [(ngModel)]="user.userName" />
                <div *ngIf="hasError('userName', 'required')">
                    <p style="color: red">UserName is required</p>
                </div>
            </div>   
        </div>
         <div class="row" style="margin-top: 5px;">
            <div class="col-2">
               <!-- todo test valid email -->
               <label class="form-label" style="float:right">Email</label>
            </div>
            <div class="col-10">
               <input  [disabled]=disableControls class="form-control" formControlName="email"  type="text"  [(ngModel)]="user.email" />
                <div *ngIf="hasError('email', 'email')">
                    <p style="color: red">Email is not valid</p>
                </div> 
            </div>   
        </div>
        <div class="row" style="margin-top: 5px;">
            <div class="col-2">
                <label class="form-label" style="float:right">Password *</label>
            </div>
            <div class="col-10">
                <input required  [disabled]=disableControls class="form-control" formControlName="password"  type="text"   [(ngModel)]="user.password" />
                <!-- Error messages for password field -->
                <div *ngIf="hasError('password', 'required')">
                <p style="color: red">Password is required</p>
            </div> 
            <div *ngIf="hasError('password', 'minlength')">
                <p style="color: red">Password must be at least 7 characters long</p>
            </div>
            <div *ngIf="hasError('password', 'uppercase')">
                <p style="color: red">
                    Password must contain at least one uppercase letter
                </p>
            </div>
            <div *ngIf="hasError('password', 'number')">
                <p style="color: red">Password must contain at least one number</p>
            </div>
            <div *ngIf="hasError('password', 'specialCharacter')">
                <p style="color: red">
                    Password must contain at least one special character
                </p>
            </div>  
        </div>
        <div class="row" style="margin-top: 5px;">
            <div class="col-2">
                <label class="form-label" style="float:right">Role *</label>
            </div>
            <div class="col-10">
                <select  class="form-select" formControlName="role" [(ngModel)]="user.role" [disabled]=disableControls style="width: 350px;">  
                    <option value="">Select Role</option>
                    <option [ngValue]="role.Name"  *ngFor="let role of roleList">
                        {{role.Name}}
                    </option>    
                </select> 
                <div *ngIf="hasError('role', 'required')">
                    <p style="color: red">Role is required</p>
                </div>
            </div>   
        </div>
      </div>
     
      </div>
   </form>
  
}


